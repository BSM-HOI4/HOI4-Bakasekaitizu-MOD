# POR_overseas_provinces = {
# 	POR_angola_overseas_province = {
# 		icon = infiltrate_state
# 		available = {
# 			has_completed_focus = POR_luso_tropicalism
# 			AND = {
# 				PRT = {
# 					controls_state = 540
# 					controls_state = 796
# 					controls_state = 891
# 					controls_state = 892
# 				}
# 				ANG = {
# 					exists = no
# 				}
# 			}
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		days_remove = 730
# 		ai_will_do = {
# 			factor = 2
# 		}
# 		modifier = {
# 			political_power_gain = -0.2
# 		}
# 		visible = {
# 			has_completed_focus = POR_luso_tropicalism
# 		}
# 		remove_effect = {
# 			country_event = lar_portugal_overseas_provinces.1
# 		}
# 	}
# 	POR_mozambique_overseas_territory = {
# 		icon = infiltrate_state
# 		available = {
# 			has_completed_focus = POR_luso_tropicalism
# 			AND = {
# 				PRT = {
# 					controls_state = 544
# 					controls_state = 896
# 					controls_state = 897
# 				}
# 				MZB = {
# 					exists = no
# 				}
# 			}
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		days_remove = 730
# 		ai_will_do = {
# 			factor = 2
# 		}
# 		modifier = {
# 			political_power_gain = -0.2
# 		}
# 		visible = {
# 			has_completed_focus = POR_luso_tropicalism
# 		}
# 		remove_effect = {
# 			country_event = lar_portugal_overseas_provinces.2
# 		}
# 	}
# }

<<<<<<< HEAD
POR_arms_purchases = {
	POR_buy_artillery_in_britain = {
		icon = generic_industry
		available = {
			GBR = {
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}
		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = {
						archetype = artillery_equipment
						ratio > 3
					}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = GBR
			}
			country_exists = GBR
		}
		complete_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = PRT
					modifier = POR_bought_guns
				}
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = GBR
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}
	POR_buy_aa_in_britain = {
		icon = generic_industry
		available = {
			GBR = {
				has_opinion = {
					target = ROOT
					value > 0
				}
				has_tech = interwar_antiair
			}
		}
		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = {
						archetype = anti_air_equipment
						ratio > 3
					}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = GBR
			}
			country_exists = GBR
		}
		complete_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = PRT
					modifier = POR_bought_guns
				}
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = anti_air_equipment
				amount = 100
				producer = GBR
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}
	POR_buy_at_in_britain = {
		icon = generic_industry
		available = {
			GBR = {
				has_opinion = {
					target = ROOT
					value > 0
				}
				has_tech = interwar_antitank
			}
		}
		cost = 0
		days_remove = 90
		days_re_enable = 90
		ai_will_do = {
			factor = 0.1
			modifier = {
				OR = {
					num_of_civilian_factories < 5
					stockpile_ratio = {
						archetype = anti_tank_equipment
						ratio > 3
					}
				}
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 10
			}
		}
		modifier = {
			civilian_factory_use = 1
		}
		visible = {
			has_completed_focus = POR_british_guns
			NOT = {
				has_war_with = GBR
			}
			country_exists = GBR
		}
		complete_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_opinion_modifier = {
					target = PRT
					modifier = POR_bought_guns
				}
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_sold_guns
			}
			add_opinion_modifier = {
				target = GBR
				modifier = POR_arms_trade
			}
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				amount = 100
				producer = GBR
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
		}
	}
	POR_buy_ships_britain = {
		icon = eng_trade_unions_support
		available = {
			GBR = {
				has_war = no
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}
		cost = 0
		ai_will_do = {
			base = 10
			modifier = {
				factor = 5
				GBR = {
					has_government = ROOT
				}
				NOT = {
					has_government = fascism_ideology
				}
			}
			modifier = {
				factor = 0
				has_country_flag = POR_ships_purchase_timer
			}
			modifier = {
				factor = 0
				has_government = fascism_ideology
				GBR = {
					NOT = {
						has_government = fascism_ideology
					}
				}
			}
		}
		visible = {
			has_completed_focus = POR_second_navy_reequipment
			GBR = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
				has_civil_war = no
				has_capitulated = no
				owns_state = 126				#Owns London
			}
			NOT = {
				has_country_flag = POR_ships_purchase_in_progress_flag
			}
			NOT = {
				has_country_flag = POR_british_ships_purchase_rejected_flag
			}
		}
		complete_effect = {
			GBR = {
				country_event = {
					id = lar_portugal_purchase_ships.1
				}
			}
			set_country_flag = POR_ships_purchase_in_progress_flag
			set_country_flag = {
				flag = POR_ships_purchase_timer
				days = 180
				value = 1
			}
		}
	}
	POR_buy_ships_italy = {
		icon = eng_trade_unions_support
		available = {
			ITA = {
				has_war = no
				has_opinion = {
					target = ROOT
					value > 0
				}
			}
		}
		cost = 0
		ai_will_do = {
			base = 10
			modifier = {
				factor = 5
				ITA = {
					has_government = ROOT
				}
			}
			modifier = {
				factor = 0
				has_country_flag = POR_ships_purchase_timer
			}
		}
		visible = {
			has_completed_focus = POR_second_navy_reequipment
			ITA = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
				has_civil_war = no
				has_capitulated = no
				owns_state = 2				#Owns Rome
			}
			NOT = {
				has_country_flag = POR_ships_purchase_in_progress_flag
			}
			NOT = {
				has_country_flag = POR_british_ships_purchase_rejected_flag
			}
		}
		complete_effect = {
			ITA = {
				country_event = {
					id = lar_portugal_purchase_ships.1
				}
			}
			set_country_flag = POR_ships_purchase_in_progress_flag
			set_country_flag = {
				flag = POR_ships_purchase_timer
				days = 180
				value = 1
			}
		}
	}
	#Mission to track the progress of British SUBMARINES construction
	POR_british_submarines_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_british_submarines_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 365
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = GBR
				}
				GBR = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 126
						}
						#Owns London
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
		#Fail
		cancel_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_british_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		#Success
		remove_effect = {
			hidden_effect = {
				add_manpower = 600
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						GBR = {
							has_tech = advanced_ship_hull_submarine
						}
					}
					GBR = {
						POR_british_submarines_construction_progress_variant = yes
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_ship_hull_submarine
						}
					}
					GBR = {
						POR_british_submarines_construction_progress_variant_2 = yes
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
				}
				else = {
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						GBR = {
							has_tech = advanced_submarine
						}
					}
					GBR = {
						POR_british_submarines_construction_progress_variant_3 = yes
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_submarine
						}
					}
					GBR = {
						POR_british_submarines_construction_progress_variant_4 = yes
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = basic_submarine
						}
					}
					GBR = {
						POR_british_submarines_construction_progress_variant_5 = yes
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = GBR
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = GBR
					}
				}
				else = {
					POR_british_submarines_construction_progress_variant_5 = yes
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
				}
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.4
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
	#Mission to track the progress of Italian SUBMARINES construction
	POR_italian_submarines_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_italian_submarines_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 365
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = ITA
				}
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 2
						}
						#Owns Rome
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_italian_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		#Success
		remove_effect = {
			hidden_effect = {
				add_manpower = 600
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						ITA = {
							has_tech = advanced_ship_hull_submarine
						}
					}
					ITA = {
						POR_british_submarines_construction_progress_variant = yes
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_ship_hull_submarine
						}
					}
					ITA = {
						POR_british_submarines_construction_progress_variant_2 = yes
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
				else = {
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
					create_ship = {
						type = ship_hull_submarine_2
						equipment_variant = "Delfim Class"
						creator = PRT
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						ITA = {
							has_tech = advanced_submarine
						}
					}
					ITA = {
						POR_british_submarines_construction_progress_variant_3 = yes
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_4
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_submarine
						}
					}
					ITA = {
						POR_british_submarines_construction_progress_variant_4 = yes
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_3
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = basic_submarine
						}
					}
					ITA = {
						POR_british_submarines_construction_progress_variant_5 = yes
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_2
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
				else = {
					ITA = {
						POR_british_submarines_construction_progress_variant_5 = yes
					}
					create_ship = {
						type = submarine_1
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_1
						equipment_variant = "Delfim Class"
						creator = ITA
					}
					create_ship = {
						type = submarine_1
						equipment_variant = "Delfim Class"
						creator = ITA
					}
				}
			}
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.4
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_submarines_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
	#Mission to track the progress of British DESTROYERS construction
	POR_british_destroyers_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_british_destroyers_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 365
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = GBR
				}
				GBR = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 126
						}
						#Owns London
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
		#Fail
		cancel_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_british_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		#Success
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						GBR = {
							has_tech = advanced_ship_hull_light
						}
					}
					hidden_effect = {
						add_manpower = 1000
					}
					GBR = {
						POR_british_destroyers_construction_progress = yes
					}
					create_ship = {
						type = ship_hull_light_4
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_light_4
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_ship_hull_light
						}
					}
					hidden_effect = {
						add_manpower = 800
					}
					GBR = {
						POR_british_destroyers_construction_progress_2 = yes
					}
					create_ship = {
						type = ship_hull_light_3
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_light_3
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 650
					}
					GBR = {
						POR_british_destroyers_construction_progress_3 = yes
					}
					create_ship = {
						type = ship_hull_light_2
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = ship_hull_light_2
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						GBR = {
							has_tech = advanced_destroyer
						}
					}
					hidden_effect = {
						add_manpower = 500
					}
					GBR = {
						POR_british_destroyers_construction_progress_4 = yes
					}
					create_ship = {
						type = destroyer_4
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = destroyer_4
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_destroyer
						}
					}
					hidden_effect = {
						add_manpower = 400
					}
					GBR = {
						POR_british_destroyers_construction_progress_5 = yes
					}
					create_ship = {
						type = destroyer_3
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = destroyer_3
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 325
					}
					GBR = {
						POR_british_destroyers_construction_progress_6 = yes
					}
					create_ship = {
						type = destroyer_2
						equipment_variant = "Vouga Class"
						creator = GBR
					}
					create_ship = {
						type = destroyer_2
						equipment_variant = "Vouga Class"
						creator = GBR
					}
				}
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.5
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
	#Mission to track the progress of Italian DESTROYERS construction
	POR_italian_destroyers_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_italian_destroyers_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 365
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = ITA
				}
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 2
						}
						#Owns Rome
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_italian_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		is_good = yes
		#Success
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						ITA = {
							has_tech = advanced_ship_hull_light
						}
					}
					hidden_effect = {
						add_manpower = 1000
					}
					ITA = {
						POR_british_destroyers_construction_progress = yes
					}
					create_ship = {
						type = ship_hull_light_4
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_light_4
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_ship_hull_light
						}
					}
					hidden_effect = {
						add_manpower = 800
					}
					ITA = {
						POR_british_destroyers_construction_progress_2 = yes
					}
					create_ship = {
						type = ship_hull_light_3
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_light_3
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 650
					}
					ITA = {
						POR_british_destroyers_construction_progress_3 = yes
					}
					create_ship = {
						type = ship_hull_light_2
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = ship_hull_light_2
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						ITA = {
							has_tech = advanced_destroyer
						}
					}
					hidden_effect = {
						add_manpower = 500
					}
					ITA = {
						POR_british_destroyers_construction_progress_4 = yes
					}
					create_ship = {
						type = destroyer_4
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = destroyer_4
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_destroyer
						}
					}
					hidden_effect = {
						add_manpower = 400
					}
					ITA = {
						POR_british_destroyers_construction_progress_5 = yes
					}
					create_ship = {
						type = destroyer_3
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = destroyer_3
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = basic_destroyer
						}
					}
					hidden_effect = {
						add_manpower = 325
					}
					ITA = {
						POR_british_destroyers_construction_progress_6 = yes
					}
					create_ship = {
						type = destroyer_2
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = destroyer_2
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 250
					}
					ITA = {
						POR_british_destroyers_construction_progress_7 = yes
					}
					create_ship = {
						type = destroyer_1
						equipment_variant = "Vouga Class"
						creator = ITA
					}
					create_ship = {
						type = destroyer_1
						equipment_variant = "Vouga Class"
						creator = ITA
					}
				}
			}
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.5
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_destroyers_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
	#Mission to track the progress of British LIGHT CRUISER construction
	POR_british_light_cruiser_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_british_light_cruiser_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 546
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = GBR
				}
				GBR = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 126
						}
						#Owns London
					}
				}
			}
		}
		#Fail
		cancel_effect = {
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = GBR
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_british_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		#Success
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						GBR = {
							has_tech = advanced_ship_hull_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1400
					}
					GBR = {
						POR_british_light_cruiser_construction_progress = yes
					}
					create_ship = {
						type = ship_hull_cruiser_4
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_ship_hull_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1200
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_2 = yes
					}
					create_ship = {
						type = ship_hull_cruiser_3
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 800
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_3 = yes
					}
					create_ship = {
						type = ship_hull_cruiser_2
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						GBR = {
							has_tech = advanced_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1140
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_4 = yes
					}
					create_ship = {
						type = light_cruiser_4
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = improved_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 960
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_5 = yes
					}
					create_ship = {
						type = light_cruiser_3
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
				else_if = {
					limit = {
						GBR = {
							has_tech = basic_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 800
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_6 = yes
					}
					create_ship = {
						type = light_cruiser_2
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 600
					}
					GBR = {
						POR_british_light_cruiser_construction_progress_7 = yes
					}
					create_ship = {
						type = light_cruiser_1
						equipment_variant = "Atlântico Class"
						creator = GBR
					}
				}
			}
			GBR = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.6
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_british_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
	#Mission to track the progress of Italian LIGHT CRUISER construction
	POR_italian_light_cruiser_construction_progress = {
		icon = generic_naval
		allowed = {
			original_tag = PRT
		}
		visible = {
			has_country_flag = POR_purchase_italian_light_cruiser_flag
		}
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 546
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = PRT
				}
				NOT = {
					country_exists = ITA
				}
				ITA = {
					OR = {
						has_war_with = ROOT
						has_civil_war = yes
						has_capitulated = yes
						NOT = {
							owns_state = 2
						}
						#Owns Rome
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
			}
		}
		#Fail
		cancel_effect = {
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_bought_ships
				}
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_sold_ships
			}
			remove_opinion_modifier = {
				target = ITA
				modifier = POR_ships_trade
			}
			clr_country_flag = POR_purchase_italian_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
		#Success
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						ITA = {
							has_tech = advanced_ship_hull_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1400
					}
					ITA = {
						POR_british_light_cruiser_construction_progress = yes
					}
					create_ship = {
						type = ship_hull_cruiser_4
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_ship_hull_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1200
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_2 = yes
					}
					create_ship = {
						type = ship_hull_cruiser_3
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 800
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_3 = yes
					}
					create_ship = {
						type = ship_hull_cruiser_2
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
			}
			else = {
				#NO MTG
				if = {
					limit = {
						ITA = {
							has_tech = advanced_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 1140
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_4 = yes
					}
					create_ship = {
						type = light_cruiser_4
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = improved_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 960
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_5 = yes
					}
					create_ship = {
						type = light_cruiser_3
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
				else_if = {
					limit = {
						ITA = {
							has_tech = basic_light_cruiser
						}
					}
					hidden_effect = {
						add_manpower = 800
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_6 = yes
					}
					create_ship = {
						type = light_cruiser_2
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
				else = {
					hidden_effect = {
						add_manpower = 600
					}
					ITA = {
						POR_british_light_cruiser_construction_progress_7 = yes
					}
					create_ship = {
						type = light_cruiser_1
						equipment_variant = "Atlântico Class"
						creator = ITA
					}
				}
			}
			ITA = {
				add_offsite_building = {
					type = industrial_complex
					level = -1
				}
			}
			country_event = lar_portugal_purchase_ships.6
			set_country_flag = POR_ships_purchased_flag
			clr_country_flag = POR_purchase_italian_light_cruiser_flag
			clr_country_flag = POR_ships_purchase_in_progress_flag
		}
	}
}
=======
# POR_arms_purchases = {
# 	POR_buy_artillery_in_britain = {
# 		icon = generic_industry
# 		available = {
# 			GBR = {
# 				has_opinion = {
# 					target = ROOT
# 					value > 0
# 				}
# 			}
# 		}
# 		cost = 0
# 		days_remove = 90
# 		days_re_enable = 90
# 		ai_will_do = {
# 			factor = 0.1
# 			modifier = {
# 				OR = {
# 					num_of_civilian_factories < 5
# 					stockpile_ratio = {
# 						archetype = artillery_equipment
# 						ratio > 3
# 					}
# 				}
# 				factor = 0
# 			}
# 			modifier = {
# 				has_war = yes
# 				factor = 10
# 			}
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		visible = {
# 			has_completed_focus = POR_british_guns
# 			NOT = {
# 				has_war_with = GBR
# 			}
# 			country_exists = GBR
# 		}
# 		complete_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 				add_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_guns
# 				}
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_guns
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_arms_trade
# 			}
# 		}
# 		remove_effect = {
# 			add_equipment_to_stockpile = {
# 				type = artillery_equipment
# 				amount = 100
# 				producer = GBR
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 		}
# 	}
# 	POR_buy_aa_in_britain = {
# 		icon = generic_industry
# 		available = {
# 			GBR = {
# 				has_opinion = {
# 					target = ROOT
# 					value > 0
# 				}
# 				has_tech = interwar_antiair
# 			}
# 		}
# 		cost = 0
# 		days_remove = 90
# 		days_re_enable = 90
# 		ai_will_do = {
# 			factor = 0.1
# 			modifier = {
# 				OR = {
# 					num_of_civilian_factories < 5
# 					stockpile_ratio = {
# 						archetype = anti_air_equipment
# 						ratio > 3
# 					}
# 				}
# 				factor = 0
# 			}
# 			modifier = {
# 				has_war = yes
# 				factor = 10
# 			}
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		visible = {
# 			has_completed_focus = POR_british_guns
# 			NOT = {
# 				has_war_with = GBR
# 			}
# 			country_exists = GBR
# 		}
# 		complete_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 				add_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_guns
# 				}
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_guns
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_arms_trade
# 			}
# 		}
# 		remove_effect = {
# 			add_equipment_to_stockpile = {
# 				type = anti_air_equipment
# 				amount = 100
# 				producer = GBR
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 		}
# 	}
# 	POR_buy_at_in_britain = {
# 		icon = generic_industry
# 		available = {
# 			GBR = {
# 				has_opinion = {
# 					target = ROOT
# 					value > 0
# 				}
# 				has_tech = interwar_antitank
# 			}
# 		}
# 		cost = 0
# 		days_remove = 90
# 		days_re_enable = 90
# 		ai_will_do = {
# 			factor = 0.1
# 			modifier = {
# 				OR = {
# 					num_of_civilian_factories < 5
# 					stockpile_ratio = {
# 						archetype = anti_tank_equipment
# 						ratio > 3
# 					}
# 				}
# 				factor = 0
# 			}
# 			modifier = {
# 				has_war = yes
# 				factor = 10
# 			}
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		visible = {
# 			has_completed_focus = POR_british_guns
# 			NOT = {
# 				has_war_with = GBR
# 			}
# 			country_exists = GBR
# 		}
# 		complete_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 				add_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_guns
# 				}
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_guns
# 			}
# 			add_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_arms_trade
# 			}
# 		}
# 		remove_effect = {
# 			add_equipment_to_stockpile = {
# 				type = anti_tank_equipment
# 				amount = 100
# 				producer = GBR
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 		}
# 	}
# 	POR_buy_ships_britain = {
# 		icon = eng_trade_unions_support
# 		available = {
# 			GBR = {
# 				has_war = no
# 				has_opinion = {
# 					target = ROOT
# 					value > 0
# 				}
# 			}
# 		}
# 		cost = 0
# 		ai_will_do = {
# 			base = 10
# 			modifier = {
# 				factor = 5
# 				GBR = {
# 					has_government = ROOT
# 				}
# 				NOT = {
# 					has_government = fascism
# 				}
# 			}
# 			modifier = {
# 				factor = 0
# 				has_country_flag = POR_ships_purchase_timer
# 			}
# 			modifier = {
# 				factor = 0
# 				has_government = fascism
# 				GBR = {
# 					NOT = {
# 						has_government = fascism
# 					}
# 				}
# 			}
# 		}
# 		visible = {
# 			has_completed_focus = POR_second_navy_reequipment
# 			GBR = {
# 				exists = yes
# 				NOT = {
# 					has_war_with = ROOT
# 				}
# 				has_civil_war = no
# 				has_capitulated = no
# 				owns_state = 126				#Owns London
# 			}
# 			NOT = {
# 				has_country_flag = POR_ships_purchase_in_progress_flag
# 			}
# 			NOT = {
# 				has_country_flag = POR_british_ships_purchase_rejected_flag
# 			}
# 		}
# 		complete_effect = {
# 			GBR = {
# 				country_event = {
# 					id = lar_portugal_purchase_ships.1
# 				}
# 			}
# 			set_country_flag = POR_ships_purchase_in_progress_flag
# 			set_country_flag = {
# 				flag = POR_ships_purchase_timer
# 				days = 180
# 				value = 1
# 			}
# 		}
# 	}
# 	POR_buy_ships_italy = {
# 		icon = eng_trade_unions_support
# 		available = {
# 			ITA = {
# 				has_war = no
# 				has_opinion = {
# 					target = ROOT
# 					value > 0
# 				}
# 			}
# 		}
# 		cost = 0
# 		ai_will_do = {
# 			base = 10
# 			modifier = {
# 				factor = 5
# 				ITA = {
# 					has_government = ROOT
# 				}
# 			}
# 			modifier = {
# 				factor = 0
# 				has_country_flag = POR_ships_purchase_timer
# 			}
# 		}
# 		visible = {
# 			has_completed_focus = POR_second_navy_reequipment
# 			ITA = {
# 				exists = yes
# 				NOT = {
# 					has_war_with = ROOT
# 				}
# 				has_civil_war = no
# 				has_capitulated = no
# 				owns_state = 2				#Owns Rome
# 			}
# 			NOT = {
# 				has_country_flag = POR_ships_purchase_in_progress_flag
# 			}
# 			NOT = {
# 				has_country_flag = POR_british_ships_purchase_rejected_flag
# 			}
# 		}
# 		complete_effect = {
# 			ITA = {
# 				country_event = {
# 					id = lar_portugal_purchase_ships.1
# 				}
# 			}
# 			set_country_flag = POR_ships_purchase_in_progress_flag
# 			set_country_flag = {
# 				flag = POR_ships_purchase_timer
# 				days = 180
# 				value = 1
# 			}
# 		}
# 	}
# 	#Mission to track the progress of British SUBMARINES construction
# 	POR_british_submarines_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_british_submarines_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 365
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = GBR
# 				}
# 				GBR = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 126
# 						}
# 						#Owns London
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_british_submarines_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		#Success
# 		remove_effect = {
# 			hidden_effect = {
# 				add_manpower = 600
# 			}
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_ship_hull_submarine
# 						}
# 					}
# 					GBR = {
# 						POR_british_submarines_construction_progress_variant = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_ship_hull_submarine
# 						}
# 					}
# 					GBR = {
# 						POR_british_submarines_construction_progress_variant_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_submarine
# 						}
# 					}
# 					GBR = {
# 						POR_british_submarines_construction_progress_variant_3 = yes
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_submarine
# 						}
# 					}
# 					GBR = {
# 						POR_british_submarines_construction_progress_variant_4 = yes
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = basic_submarine
# 						}
# 					}
# 					GBR = {
# 						POR_british_submarines_construction_progress_variant_5 = yes
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					POR_british_submarines_construction_progress_variant_5 = yes
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 				}
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.4
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_british_submarines_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# 	#Mission to track the progress of Italian SUBMARINES construction
# 	POR_italian_submarines_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_italian_submarines_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 365
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = ITA
# 				}
# 				ITA = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 2
# 						}
# 						#Owns Rome
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_italian_submarines_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		#Success
# 		remove_effect = {
# 			hidden_effect = {
# 				add_manpower = 600
# 			}
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_ship_hull_submarine
# 						}
# 					}
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_ship_hull_submarine
# 						}
# 					}
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 					create_ship = {
# 						type = ship_hull_submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = PRT
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_submarine
# 						}
# 					}
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant_3 = yes
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_4
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_submarine
# 						}
# 					}
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant_4 = yes
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_3
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = basic_submarine
# 						}
# 					}
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant_5 = yes
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_2
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					ITA = {
# 						POR_british_submarines_construction_progress_variant_5 = yes
# 					}
# 					create_ship = {
# 						type = submarine_1
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_1
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = submarine_1
# 						equipment_variant = "Delfim Class"
# 						creator = ITA
# 					}
# 				}
# 			}
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.4
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_italian_submarines_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# 	#Mission to track the progress of British DESTROYERS construction
# 	POR_british_destroyers_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_british_destroyers_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 365
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = GBR
# 				}
# 				GBR = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 126
# 						}
# 						#Owns London
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_british_destroyers_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		#Success
# 		remove_effect = {
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_ship_hull_light
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1000
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_4
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_light_4
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_ship_hull_light
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_3
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_light_3
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 650
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress_3 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_2
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = ship_hull_light_2
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_destroyer
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 500
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress_4 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_4
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = destroyer_4
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_destroyer
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 400
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress_5 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_3
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = destroyer_3
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 325
# 					}
# 					GBR = {
# 						POR_british_destroyers_construction_progress_6 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_2
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 					create_ship = {
# 						type = destroyer_2
# 						equipment_variant = "Vouga Class"
# 						creator = GBR
# 					}
# 				}
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.5
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_british_destroyers_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# 	#Mission to track the progress of Italian DESTROYERS construction
# 	POR_italian_destroyers_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_italian_destroyers_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 365
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = ITA
# 				}
# 				ITA = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 2
# 						}
# 						#Owns Rome
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_italian_destroyers_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		is_good = yes
# 		#Success
# 		remove_effect = {
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_ship_hull_light
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1000
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_4
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_light_4
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_ship_hull_light
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_3
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_light_3
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 650
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_3 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_light_2
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = ship_hull_light_2
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_destroyer
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 500
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_4 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_4
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = destroyer_4
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_destroyer
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 400
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_5 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_3
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = destroyer_3
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = basic_destroyer
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 325
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_6 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_2
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = destroyer_2
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 250
# 					}
# 					ITA = {
# 						POR_british_destroyers_construction_progress_7 = yes
# 					}
# 					create_ship = {
# 						type = destroyer_1
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 					create_ship = {
# 						type = destroyer_1
# 						equipment_variant = "Vouga Class"
# 						creator = ITA
# 					}
# 				}
# 			}
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.5
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_italian_destroyers_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# 	#Mission to track the progress of British LIGHT CRUISER construction
# 	POR_british_light_cruiser_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_british_light_cruiser_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 546
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = GBR
# 				}
# 				GBR = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 126
# 						}
# 						#Owns London
# 					}
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = GBR
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_british_light_cruiser_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		#Success
# 		remove_effect = {
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_ship_hull_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1400
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_4
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_ship_hull_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1200
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_3
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_3 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_2
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						GBR = {
# 							has_tech = advanced_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1140
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_4 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_4
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = improved_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 960
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_5 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_3
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						GBR = {
# 							has_tech = basic_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_6 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_2
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 600
# 					}
# 					GBR = {
# 						POR_british_light_cruiser_construction_progress_7 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_1
# 						equipment_variant = "Atlântico Class"
# 						creator = GBR
# 					}
# 				}
# 			}
# 			GBR = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.6
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_british_light_cruiser_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# 	#Mission to track the progress of Italian LIGHT CRUISER construction
# 	POR_italian_light_cruiser_construction_progress = {
# 		icon = generic_naval
# 		allowed = {
# 			original_tag = PRT
# 		}
# 		visible = {
# 			has_country_flag = POR_purchase_italian_light_cruiser_flag
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		days_remove = 546
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				NOT = {
# 					country_exists = ITA
# 				}
# 				ITA = {
# 					OR = {
# 						has_war_with = ROOT
# 						has_civil_war = yes
# 						has_capitulated = yes
# 						NOT = {
# 							owns_state = 2
# 						}
# 						#Owns Rome
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = 1
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_bought_ships
# 				}
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_sold_ships
# 			}
# 			remove_opinion_modifier = {
# 				target = ITA
# 				modifier = POR_ships_trade
# 			}
# 			clr_country_flag = POR_purchase_italian_light_cruiser_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 		#Success
# 		remove_effect = {
# 			if = {
# 				limit = {
# 					has_dlc = "Man the Guns"
# 				}
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_ship_hull_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1400
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_4
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_ship_hull_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1200
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_2 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_3
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_3 = yes
# 					}
# 					create_ship = {
# 						type = ship_hull_cruiser_2
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 			}
# 			else = {
# 				#NO MTG
# 				if = {
# 					limit = {
# 						ITA = {
# 							has_tech = advanced_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 1140
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_4 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_4
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = improved_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 960
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_5 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_3
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						ITA = {
# 							has_tech = basic_light_cruiser
# 						}
# 					}
# 					hidden_effect = {
# 						add_manpower = 800
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_6 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_2
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 				else = {
# 					hidden_effect = {
# 						add_manpower = 600
# 					}
# 					ITA = {
# 						POR_british_light_cruiser_construction_progress_7 = yes
# 					}
# 					create_ship = {
# 						type = light_cruiser_1
# 						equipment_variant = "Atlântico Class"
# 						creator = ITA
# 					}
# 				}
# 			}
# 			ITA = {
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			country_event = lar_portugal_purchase_ships.6
# 			set_country_flag = POR_ships_purchased_flag
# 			clr_country_flag = POR_purchase_italian_light_cruiser_flag
# 			clr_country_flag = POR_ships_purchase_in_progress_flag
# 		}
# 	}
# }
>>>>>>> fix/bugfix

# POR_naval_blockade = {
# 	POR_evade_blockade_with_portuguese_convoys = {
# 		icon = generic_naval
# 		allowed = {
# 			NOT = {
# 				original_tag = PRT
# 			}
# 		}
# 		visible = {
# 			PRT = {
# 				has_completed_focus = POR_refuse_the_naval_blockade
# 			}
# 			NOT = {
# 				has_country_flag = POR_evade_blockade_flag
# 				has_country_flag = POR_cancel_evade_blockade_flag
# 			}
# 		}
# 		available = {
# 			num_of_civilian_factories > 1
# 			PRT = {
# 				has_navy_size = {
# 					size > 49
# 					type = convoy
# 				}
# 				has_opinion = {
# 					target = ROOT
# 					value > -10
# 				}
# 			}
# 		}
# 		cost = 25
# 		fire_only_once = yes
# 		ai_will_do = {
# 			base = 1
# 		}
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					has_war_with = GBR
# 				}
# 				has_war_with = PRT
# 				has_country_flag = POR_cancel_evade_blockade_flag
# 				has_capitulated = yes
# 			}
# 		}
# 		days_remove = -1
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		#Fail
# 		cancel_effect = {
# 			add_war_support = -0.1
# 			PRT = {
# 				add_equipment_to_stockpile = {
# 					type = convoy_1
# 					amount = 50
# 				}
# 				add_offsite_building = {
# 					type = industrial_complex
# 					level = -1
# 				}
# 			}
# 			set_country_flag = POR_cancel_evade_blockade_flag
# 			clr_country_flag = POR_evade_blockade_flag
# 		}
# 		#On Activation
# 		complete_effect = {
# 			add_war_support = 0.1
# 			set_country_flag = POR_evade_blockade_flag
# 			effect_tooltip = {
# 				PRT = {
# 					add_equipment_to_stockpile = {
# 						type = convoy_1
# 						amount = -50
# 					}
# 					add_offsite_building = {
# 						type = industrial_complex
# 						level = 1
# 					}
# 				}
# 			}
# 			hidden_effect = {
# 				PRT = {
# 					country_event = lar_portugal_naval_blockade.2
# 					activate_targeted_decision = {
# 						target = ROOT
# 						decision = POR_portugal_cancel_blockade_evasion_for_country
# 					}
# 				}
# 			}
# 		}
# 	}
# 	POR_major_cancel_portuguese_blockade_evasion = {
# 		icon = generic_break_treaty
# 		available = {
# 			has_country_flag = POR_evade_blockade_flag
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		ai_will_do = {
# 			base = 0
# 			modifier = {
# 				add = 1
# 				num_of_civilian_factories < 6
# 			}
# 		}
# 		visible = {
# 			has_country_flag = POR_evade_blockade_flag
# 			NOT = {
# 				has_country_flag = POR_cancel_evade_blockade_flag
# 			}
# 		}
# 		complete_effect = {
# 			add_war_support = -0.1
# 			set_country_flag = POR_cancel_evade_blockade_flag
# 			clr_country_flag = POR_evade_blockade_flag
# 		}
# 	}
# 	POR_portugal_cancel_blockade_evasion_for_country = {
# 		icon = generic_break_treaty
# 		available = {
# 			always = yes
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		ai_will_do = {
# 			base = 0
# 			modifier = {
# 				add = 1
# 				OR = {
# 					has_equipment = {
# 						convoy_1 < 5
# 					}
# 					AND = {
# 						has_opinion = {
# 							target = FROM
# 							value < -10
# 						}
# 						NOT = {
# 							has_war_with = FROM
# 						}
# 					}
# 				}
# 			}
# 		}
# 		visible = {
# 			original_tag = PRT
# 			country_exists = FROM
# 			FROM = {
# 				has_country_flag = POR_evade_blockade_flag
# 				NOT = {
# 					has_country_flag = POR_cancel_evade_blockade_flag
# 					has_war_with = PRT
# 				}
# 			}
# 		}
# 		complete_effect = {
# 			FROM = {
# 				add_war_support = -0.1
# 				set_country_flag = POR_cancel_evade_blockade_flag
# 				clr_country_flag = POR_evade_blockade_flag
# 			}
# 		}
# 	}
# }

<<<<<<< HEAD
POR_iberian_summit = {
	POR_iberian_summit_pro_axis = {
		icon = eng_trade_unions_support
		allowed = {
			OR = {
				original_tag = PRT
				tag = ESP
			}
		}
		available = {
			PRT = {
				has_war = no
			}
			ESP = {
				has_war = no
			}
			NOT = {
				has_global_flag = POR_iberian_summit_in_progress_flag
			}
		}
		visible = {
			NOT = {
				has_global_flag = POR_iberian_summit_pro_axis_flag
			}
			country_exists = PRT
			PRT = {
				is_in_faction = no
				has_completed_focus = POR_iberian_summit
				NOT = {
					has_government = communism_ideology
				}
				NOT = {
					has_government = democratic_ideology
				}
			}
			country_exists = ESP
			ESP = {
				is_in_faction = no
				OR = {
					has_completed_focus = SPA_the_phalanx_ascendant
					AND = {
						has_completed_focus = SPA_unify_the_nationalist_front
						NOT = {
							has_completed_focus = SPA_the_iberian_pact
						}
					}
				}
			}
			DEU = {
				is_faction_leader = yes
				has_government = fascism_ideology
				has_capitulated = no
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 1
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_completed_focus = POR_send_assistance
				OR = {
					DEU = {
						has_war = yes
						OR = {
							alliance_strength_ratio > 0.75
							any_war_score > 40
						}
					}
					has_opinion = {
						target = DEU
						value > 0
					}
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		complete_effect = {
			set_global_flag = POR_iberian_summit_pro_axis_flag
			set_global_flag = POR_iberian_summit_in_progress_flag
			set_country_flag = POR_iberian_summit_initiator_flag
			set_variable = {
				global.POR_iberian_summit_target = DEU
			}
			set_variable = {
				global.POR_iberian_summit_spanish_tag = ESP
			}
			if = {
				limit = {
					tag = PRT
				}
				ESP = {
					country_event = {
						id = lar_portugal_iberian_summit.1
						hours = 18
						random_hours = 6
					}
				}
			}
			else = {
				PRT = {
					country_event = {
						id = lar_portugal_iberian_summit.1
						hours = 18
						random_hours = 6
					}
				}
			}
		}
	}
	POR_iberian_summit_pro_allies = {
		icon = eng_trade_unions_support
		allowed = {
			OR = {
				original_tag = PRT
				tag = ESP
				tag = SPD
			}
		}
		available = {
			PRT = {
				has_war = no
			}
			if = {
				limit = {
					country_exists = ESP					#This is the prio
				}
				ESP = {
					has_war = no
				}
			}
			else = {
				SPD = {
					has_war = no
				}
			}
			NOT = {
				has_global_flag = POR_iberian_summit_in_progress_flag
			}
		}
		visible = {
			NOT = {
				has_global_flag = POR_iberian_summit_pro_allies_flag
			}
			country_exists = PRT
			PRT = {
				is_in_faction = no
				has_completed_focus = POR_iberian_summit
				NOT = {
					has_government = fascism_ideology
				}
				NOT = {
					has_government = communism_ideology
				}
			}
			if = {
				limit = {
					country_exists = ESP					#This is the prio
				}
				ESP = {
					is_in_faction = no
					has_completed_focus = SPA_unify_the_nationalist_front
					NOT = {
						has_completed_focus = SPA_the_iberian_pact
					}
				}
			}
			else = {
				country_exists = SPD
				SPD = {
					is_in_faction = no
					has_completed_focus = SPR_maintain_the_second_republic
					has_government = democratic_ideology
				}
			}
			GBR = {
				is_faction_leader = yes
				has_government = democratic_ideology
				has_capitulated = no
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 1
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				PRT = {
					has_completed_focus = POR_allow_free_elections
				}
				OR = {
					GBR = {
						has_war = yes
						OR = {
							alliance_strength_ratio > 0.75
							any_war_score > 40
						}
					}
					has_opinion = {
						target = GBR
						value > 0
					}
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		complete_effect = {
			set_global_flag = POR_iberian_summit_pro_allies_flag
			set_global_flag = POR_iberian_summit_in_progress_flag
			set_country_flag = POR_iberian_summit_initiator_flag
			set_variable = {
				global.POR_iberian_summit_target = GBR
			}
			if = {
				limit = {
					country_exists = ESP
				}
				set_variable = {
					global.POR_iberian_summit_spanish_tag = ESP
				}
			}
			else = {
				set_variable = {
					global.POR_iberian_summit_spanish_tag = SPD
				}
			}
			if = {
				limit = {
					tag = PRT
				}
				41 = {
					owner = {
						country_event = {
							id = lar_portugal_iberian_summit.5
							hours = 18
							random_hours = 6
						}
					}
				}
			}
			else = {
				PRT = {
					country_event = {
						id = lar_portugal_iberian_summit.5
						hours = 18
						random_hours = 6
					}
				}
			}
		}
	}
	#Timed Decision for delaying proposal
	POR_iberian_summit_proposal_delayed = {
		icon = generic_political_discourse
		allowed = {
			OR = {
				tag = PRT
				tag = SPD
				tag = ESP
			}
		}
		visible = {
			has_global_flag = POR_iberian_summit_proposal_delayed_flag
		}
		fire_only_once = no
		days_remove = 180
		modifier = {
			political_power_gain = -0.2
		}
		cancel_trigger = {
			OR = {
				NOT = {
					country_exists = global.POR_iberian_summit_target
				}
				var:global.POR_iberian_summit_target = {
					is_faction_leader = no
				}
				NOT = {
					country_exists = PRT
				}
				PRT = {
					OR = {
						has_war = yes
						is_in_faction = yes
					}
				}
				NOT = {
					country_exists = global.POR_iberian_summit_spanish_tag
				}
				var:global.POR_iberian_summit_spanish_tag = {
					OR = {
						has_war = yes
						is_in_faction = yes
					}
				}
			}
		}
		#On Activation
		complete_effect = {
			var:global.POR_iberian_summit_target = {
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_iberian_summit_diplomatic_approach
				}
			}
		}
		#Fail
		cancel_effect = {
			remove_opinion_modifier = {
				target = PRT
				modifier = POR_iberian_summit_working_together
			}
			var:global.POR_iberian_summit_target = {
				remove_opinion_modifier = {
					target = PRT
					modifier = POR_iberian_summit_diplomatic_approach
				}
			}
			if = {
				limit = {
					country_exists = ESP
				}
				remove_opinion_modifier = {
					target = ESP
					modifier = POR_iberian_summit_working_together
				}
				var:global.POR_iberian_summit_target = {
					remove_opinion_modifier = {
						target = ESP
						modifier = POR_iberian_summit_diplomatic_approach
					}
				}
			}
			else = {
				remove_opinion_modifier = {
					target = SPD
					modifier = POR_iberian_summit_working_together
				}
				var:global.POR_iberian_summit_target = {
					remove_opinion_modifier = {
						target = ESP
						modifier = POR_iberian_summit_diplomatic_approach
					}
				}
			}
			clr_global_flag = POR_iberian_summit_in_progress_flag
			clr_global_flag = POR_iberian_summit_proposal_delayed_flag
			clr_country_flag = POR_iberian_summit_initiator_flag
			clear_variable = global.POR_iberian_summit_target
		}
		#Success
		remove_effect = {
			if = {
				limit = {
					has_country_flag = POR_iberian_summit_initiator_flag
				}
				if = {
					limit = {
						check_variable = {
							var = global.POR_iberian_summit_target
							value = DEU
							compare = equals
						}
					}
					var:global.POR_iberian_summit_target = {
						country_event = {
							id = lar_portugal_iberian_summit.4
							hours = 8
							random_hours = 4
						}
					}
				}
				else = {
					var:global.POR_iberian_summit_target = {
						country_event = {
							id = lar_portugal_iberian_summit.8
							hours = 8
							random_hours = 4
						}
					}
				}
			}
			clr_global_flag = POR_iberian_summit_in_progress_flag
			clr_global_flag = POR_iberian_summit_proposal_delayed_flag
			clr_country_flag = POR_iberian_summit_initiator_flag
		}
	}
}

POR_monarchist_cause = {
	POR_stir_monarchist_sentiment_in_brazil = {
		icon = generic_political_discourse
		allowed = {
			has_dlc = "La Resistance"
			original_tag = PRT
		}
		available = {
			BRA = {
				has_war = no
			}
		}
		cost = 25
		fire_only_once = no
		ai_will_do = {
			base = 1
		}
		visible = {
			has_completed_focus = POR_a_royal_wedding
			NOT = {
				has_completed_focus = POR_the_empire_of_brazil
			}
			country_exists = BRA
		}
		cancel_trigger = {
			OR = {
				has_completed_focus = POR_the_empire_of_brazil
				has_war_with = BRA
				BRA = {
					neutrality_ideology < -0.15
				}
			}
		}
		cancel_effect = {
			BRA = {
				clr_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
				set_country_flag = POR_brazilian_monarchists_stirred_flag
			}
		}
		modifier = {
			political_power_gain = -0.5
		}
		days_remove = 180
		remove_effect = {
			BRA = {
				clr_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
				set_country_flag = POR_brazilian_monarchists_stirred_flag
			}
		}
		complete_effect = {
			custom_effect_tooltip = POR_stir_monarchist_sentiment_in_brazil_tt
			BRA = {
				activate_decision = POR_portugal_promoting_monarchist_cause_in_brazil
				set_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
				country_event = {
					id = lar_portugal_promote_monarchist_cause.1
				}
			}
		}
	}
	#Mission for BRA when PRT starts promoting monarchist cause in BRA.
	POR_portugal_promoting_monarchist_cause_in_brazil = {
		icon = generic_civil_support
		allowed = {
			has_dlc = "La Resistance"
			original_tag = BRA
		}
		visible = {
			has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
		}
		cancel_trigger = {
			OR = {
				NOT = {
					has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
				}
				PRT = {
					has_completed_focus = POR_the_empire_of_brazil
				}
				neutrality_ideology < -0.15
				has_war_with = PRT
			}
		}
		fire_only_once = no
		modifier = {
			neutrality_ideology_drift = 0.1
			stability_weekly = -0.01
		}
		days_remove = 180
	}
	#Decision for BRA to fight brazilian monarchists
	POR_repress_brazilian_monarchists = {
		icon = oppression
		allowed = {
			has_dlc = "La Resistance"
			original_tag = BRA
		}
		available = {
			neutrality_ideology < 1
		}
		cost = 25
		fire_only_once = no
		ai_will_do = {
			factor = 0
		}
		visible = {
			OR = {
				has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
				has_country_flag = POR_brazilian_monarchists_stirred_flag
			}
			country_exists = PRT
			PRT = {
				NOT = {
					has_completed_focus = POR_the_empire_of_brazil
				}
			}
		}
		cancel_trigger = {
			PRT = {
				has_completed_focus = POR_the_empire_of_brazil
			}
		}
		modifier = {
			stability_factor = -0.05
			political_power_gain = -0.5
			neutrality_ideology_drift = -0.1
		}
		days_remove = 180
		remove_effect = {
			clr_country_flag = POR_brazilian_monarchists_stirred_flag
		}
	}
	#Decision to boost unaligned popularity in Portugal 
	POR_stir_monarchist_sentiment_in_portugal = {
		icon = generic_political_discourse
		allowed = {
			has_dlc = "La Resistance"
			original_tag = PRT
		}
		available = {
			neutrality_ideology < 1
		}
		cost = 25
		fire_only_once = no
		ai_will_do = {
			base = 1
		}
		visible = {
			has_completed_focus = POR_a_royal_wedding
			NOT = {
				has_completed_focus = POR_restoration_of_the_monarchy
			}
		}
		cancel_trigger = {
			has_completed_focus = POR_restoration_of_the_monarchy
		}
		modifier = {
			political_power_gain = -0.5
			neutrality_ideology_drift = 0.1
			stability_weekly = -0.01
		}
		days_remove = 180
	}
}
=======
# POR_iberian_summit = {
# 	POR_iberian_summit_pro_axis = {
# 		icon = eng_trade_unions_support
# 		allowed = {
# 			OR = {
# 				original_tag = PRT
# 				tag = ESP
# 			}
# 		}
# 		available = {
# 			PRT = {
# 				has_war = no
# 			}
# 			ESP = {
# 				has_war = no
# 			}
# 			NOT = {
# 				has_global_flag = POR_iberian_summit_in_progress_flag
# 			}
# 		}
# 		visible = {
# 			NOT = {
# 				has_global_flag = POR_iberian_summit_pro_axis_flag
# 			}
# 			country_exists = PRT
# 			PRT = {
# 				is_in_faction = no
# 				has_completed_focus = POR_iberian_summit
# 				NOT = {
# 					has_government = communism
# 				}
# 				NOT = {
# 					has_government = democratic
# 				}
# 			}
# 			country_exists = ESP
# 			ESP = {
# 				is_in_faction = no
# 				OR = {
# 					has_completed_focus = SPA_the_phalanx_ascendant
# 					AND = {
# 						has_completed_focus = SPA_unify_the_nationalist_front
# 						NOT = {
# 							has_completed_focus = SPA_the_iberian_pact
# 						}
# 					}
# 				}
# 			}
# 			DEU = {
# 				is_faction_leader = yes
# 				has_government = fascism
# 				has_capitulated = no
# 			}
# 		}
# 		cost = 50
# 		fire_only_once = yes
# 		days_remove = 1
# 		ai_will_do = {
# 			base = 0
# 			modifier = {
# 				add = 1
# 				has_completed_focus = POR_send_assistance
# 				OR = {
# 					DEU = {
# 						has_war = yes
# 						OR = {
# 							alliance_strength_ratio > 0.75
# 							any_war_score > 40
# 						}
# 					}
# 					has_opinion = {
# 						target = DEU
# 						value > 0
# 					}
# 				}
# 			}
# 			modifier = {
# 				factor = 0
# 				is_historical_focus_on = yes
# 			}
# 		}
# 		complete_effect = {
# 			set_global_flag = POR_iberian_summit_pro_axis_flag
# 			set_global_flag = POR_iberian_summit_in_progress_flag
# 			set_country_flag = POR_iberian_summit_initiator_flag
# 			set_variable = {
# 				global.POR_iberian_summit_target = DEU
# 			}
# 			set_variable = {
# 				global.POR_iberian_summit_spanish_tag = ESP
# 			}
# 			if = {
# 				limit = {
# 					tag = PRT
# 				}
# 				ESP = {
# 					country_event = {
# 						id = lar_portugal_iberian_summit.1
# 						hours = 18
# 						random_hours = 6
# 					}
# 				}
# 			}
# 			else = {
# 				PRT = {
# 					country_event = {
# 						id = lar_portugal_iberian_summit.1
# 						hours = 18
# 						random_hours = 6
# 					}
# 				}
# 			}
# 		}
# 	}
# 	POR_iberian_summit_pro_allies = {
# 		icon = eng_trade_unions_support
# 		allowed = {
# 			OR = {
# 				original_tag = PRT
# 				tag = ESP
# 				tag = SPD
# 			}
# 		}
# 		available = {
# 			PRT = {
# 				has_war = no
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP					#This is the prio
# 				}
# 				ESP = {
# 					has_war = no
# 				}
# 			}
# 			else = {
# 				SPD = {
# 					has_war = no
# 				}
# 			}
# 			NOT = {
# 				has_global_flag = POR_iberian_summit_in_progress_flag
# 			}
# 		}
# 		visible = {
# 			NOT = {
# 				has_global_flag = POR_iberian_summit_pro_allies_flag
# 			}
# 			country_exists = PRT
# 			PRT = {
# 				is_in_faction = no
# 				has_completed_focus = POR_iberian_summit
# 				NOT = {
# 					has_government = fascism
# 				}
# 				NOT = {
# 					has_government = communism
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP					#This is the prio
# 				}
# 				ESP = {
# 					is_in_faction = no
# 					has_completed_focus = SPA_unify_the_nationalist_front
# 					NOT = {
# 						has_completed_focus = SPA_the_iberian_pact
# 					}
# 				}
# 			}
# 			else = {
# 				country_exists = SPD
# 				SPD = {
# 					is_in_faction = no
# 					has_completed_focus = SPR_maintain_the_second_republic
# 					has_government = democratic
# 				}
# 			}
# 			GBR = {
# 				is_faction_leader = yes
# 				has_government = democratic
# 				has_capitulated = no
# 			}
# 		}
# 		cost = 50
# 		fire_only_once = yes
# 		days_remove = 1
# 		ai_will_do = {
# 			base = 0
# 			modifier = {
# 				add = 1
# 				PRT = {
# 					has_completed_focus = POR_allow_free_elections
# 				}
# 				OR = {
# 					GBR = {
# 						has_war = yes
# 						OR = {
# 							alliance_strength_ratio > 0.75
# 							any_war_score > 40
# 						}
# 					}
# 					has_opinion = {
# 						target = GBR
# 						value > 0
# 					}
# 				}
# 			}
# 			modifier = {
# 				factor = 0
# 				is_historical_focus_on = yes
# 			}
# 		}
# 		complete_effect = {
# 			set_global_flag = POR_iberian_summit_pro_allies_flag
# 			set_global_flag = POR_iberian_summit_in_progress_flag
# 			set_country_flag = POR_iberian_summit_initiator_flag
# 			set_variable = {
# 				global.POR_iberian_summit_target = GBR
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				set_variable = {
# 					global.POR_iberian_summit_spanish_tag = ESP
# 				}
# 			}
# 			else = {
# 				set_variable = {
# 					global.POR_iberian_summit_spanish_tag = SPD
# 				}
# 			}
# 			if = {
# 				limit = {
# 					tag = PRT
# 				}
# 				41 = {
# 					owner = {
# 						country_event = {
# 							id = lar_portugal_iberian_summit.5
# 							hours = 18
# 							random_hours = 6
# 						}
# 					}
# 				}
# 			}
# 			else = {
# 				PRT = {
# 					country_event = {
# 						id = lar_portugal_iberian_summit.5
# 						hours = 18
# 						random_hours = 6
# 					}
# 				}
# 			}
# 		}
# 	}
# 	#Timed Decision for delaying proposal
# 	POR_iberian_summit_proposal_delayed = {
# 		icon = generic_political_discourse
# 		allowed = {
# 			OR = {
# 				tag = PRT
# 				tag = SPD
# 				tag = ESP
# 			}
# 		}
# 		visible = {
# 			has_global_flag = POR_iberian_summit_proposal_delayed_flag
# 		}
# 		fire_only_once = no
# 		days_remove = 180
# 		modifier = {
# 			political_power_gain = -0.2
# 		}
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					country_exists = global.POR_iberian_summit_target
# 				}
# 				var:global.POR_iberian_summit_target = {
# 					is_faction_leader = no
# 				}
# 				NOT = {
# 					country_exists = PRT
# 				}
# 				PRT = {
# 					OR = {
# 						has_war = yes
# 						is_in_faction = yes
# 					}
# 				}
# 				NOT = {
# 					country_exists = global.POR_iberian_summit_spanish_tag
# 				}
# 				var:global.POR_iberian_summit_spanish_tag = {
# 					OR = {
# 						has_war = yes
# 						is_in_faction = yes
# 					}
# 				}
# 			}
# 		}
# 		#On Activation
# 		complete_effect = {
# 			var:global.POR_iberian_summit_target = {
# 				add_opinion_modifier = {
# 					target = ROOT
# 					modifier = POR_iberian_summit_diplomatic_approach
# 				}
# 			}
# 		}
# 		#Fail
# 		cancel_effect = {
# 			remove_opinion_modifier = {
# 				target = PRT
# 				modifier = POR_iberian_summit_working_together
# 			}
# 			var:global.POR_iberian_summit_target = {
# 				remove_opinion_modifier = {
# 					target = PRT
# 					modifier = POR_iberian_summit_diplomatic_approach
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				remove_opinion_modifier = {
# 					target = ESP
# 					modifier = POR_iberian_summit_working_together
# 				}
# 				var:global.POR_iberian_summit_target = {
# 					remove_opinion_modifier = {
# 						target = ESP
# 						modifier = POR_iberian_summit_diplomatic_approach
# 					}
# 				}
# 			}
# 			else = {
# 				remove_opinion_modifier = {
# 					target = SPD
# 					modifier = POR_iberian_summit_working_together
# 				}
# 				var:global.POR_iberian_summit_target = {
# 					remove_opinion_modifier = {
# 						target = ESP
# 						modifier = POR_iberian_summit_diplomatic_approach
# 					}
# 				}
# 			}
# 			clr_global_flag = POR_iberian_summit_in_progress_flag
# 			clr_global_flag = POR_iberian_summit_proposal_delayed_flag
# 			clr_country_flag = POR_iberian_summit_initiator_flag
# 			clear_variable = global.POR_iberian_summit_target
# 		}
# 		#Success
# 		remove_effect = {
# 			if = {
# 				limit = {
# 					has_country_flag = POR_iberian_summit_initiator_flag
# 				}
# 				if = {
# 					limit = {
# 						check_variable = {
# 							var = global.POR_iberian_summit_target
# 							value = DEU
# 							compare = equals
# 						}
# 					}
# 					var:global.POR_iberian_summit_target = {
# 						country_event = {
# 							id = lar_portugal_iberian_summit.4
# 							hours = 8
# 							random_hours = 4
# 						}
# 					}
# 				}
# 				else = {
# 					var:global.POR_iberian_summit_target = {
# 						country_event = {
# 							id = lar_portugal_iberian_summit.8
# 							hours = 8
# 							random_hours = 4
# 						}
# 					}
# 				}
# 			}
# 			clr_global_flag = POR_iberian_summit_in_progress_flag
# 			clr_global_flag = POR_iberian_summit_proposal_delayed_flag
# 			clr_country_flag = POR_iberian_summit_initiator_flag
# 		}
# 	}
# }

# POR_monarchist_cause = {
# 	POR_stir_monarchist_sentiment_in_brazil = {
# 		icon = generic_political_discourse
# 		allowed = {
# 			has_dlc = "La Resistance"
# 			original_tag = PRT
# 		}
# 		available = {
# 			BRA = {
# 				has_war = no
# 			}
# 		}
# 		cost = 25
# 		fire_only_once = no
# 		ai_will_do = {
# 			base = 1
# 		}
# 		visible = {
# 			has_completed_focus = POR_a_royal_wedding
# 			NOT = {
# 				has_completed_focus = POR_the_empire_of_brazil
# 			}
# 			country_exists = BRA
# 		}
# 		cancel_trigger = {
# 			OR = {
# 				has_completed_focus = POR_the_empire_of_brazil
# 				has_war_with = BRA
# 				BRA = {
# 					neutrality < -0.15
# 				}
# 			}
# 		}
# 		cancel_effect = {
# 			BRA = {
# 				clr_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 				set_country_flag = POR_brazilian_monarchists_stirred_flag
# 			}
# 		}
# 		modifier = {
# 			political_power_gain = -0.5
# 		}
# 		days_remove = 180
# 		remove_effect = {
# 			BRA = {
# 				clr_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 				set_country_flag = POR_brazilian_monarchists_stirred_flag
# 			}
# 		}
# 		complete_effect = {
# 			custom_effect_tooltip = POR_stir_monarchist_sentiment_in_brazil_tt
# 			BRA = {
# 				activate_decision = POR_portugal_promoting_monarchist_cause_in_brazil
# 				set_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 				country_event = {
# 					id = lar_portugal_promote_monarchist_cause.1
# 				}
# 			}
# 		}
# 	}
# 	#Mission for BRA when PRT starts promoting monarchist cause in BRA.
# 	POR_portugal_promoting_monarchist_cause_in_brazil = {
# 		icon = generic_civil_support
# 		allowed = {
# 			has_dlc = "La Resistance"
# 			original_tag = BRA
# 		}
# 		visible = {
# 			has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 		}
# 		cancel_trigger = {
# 			OR = {
# 				NOT = {
# 					has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 				}
# 				PRT = {
# 					has_completed_focus = POR_the_empire_of_brazil
# 				}
# 				neutrality < -0.15
# 				has_war_with = PRT
# 			}
# 		}
# 		fire_only_once = no
# 		modifier = {
# 			neutrality_drift = 0.1
# 			stability_weekly = -0.01
# 		}
# 		days_remove = 180
# 	}
# 	#Decision for BRA to fight brazilian monarchists
# 	POR_repress_brazilian_monarchists = {
# 		icon = oppression
# 		allowed = {
# 			has_dlc = "La Resistance"
# 			original_tag = BRA
# 		}
# 		available = {
# 			neutrality < 1
# 		}
# 		cost = 25
# 		fire_only_once = no
# 		ai_will_do = {
# 			factor = 0
# 		}
# 		visible = {
# 			OR = {
# 				has_country_flag = POR_portugal_stirring_brazilian_monarchists_flag
# 				has_country_flag = POR_brazilian_monarchists_stirred_flag
# 			}
# 			country_exists = PRT
# 			PRT = {
# 				NOT = {
# 					has_completed_focus = POR_the_empire_of_brazil
# 				}
# 			}
# 		}
# 		cancel_trigger = {
# 			PRT = {
# 				has_completed_focus = POR_the_empire_of_brazil
# 			}
# 		}
# 		modifier = {
# 			stability_factor = -0.05
# 			political_power_gain = -0.5
# 			neutrality_drift = -0.1
# 		}
# 		days_remove = 180
# 		remove_effect = {
# 			clr_country_flag = POR_brazilian_monarchists_stirred_flag
# 		}
# 	}
# 	#Decision to boost unaligned popularity in Portugal 
# 	POR_stir_monarchist_sentiment_in_portugal = {
# 		icon = generic_political_discourse
# 		allowed = {
# 			has_dlc = "La Resistance"
# 			original_tag = PRT
# 		}
# 		available = {
# 			neutrality < 1
# 		}
# 		cost = 25
# 		fire_only_once = no
# 		ai_will_do = {
# 			base = 1
# 		}
# 		visible = {
# 			has_completed_focus = POR_a_royal_wedding
# 			NOT = {
# 				has_completed_focus = POR_restoration_of_the_monarchy
# 			}
# 		}
# 		cancel_trigger = {
# 			has_completed_focus = POR_restoration_of_the_monarchy
# 		}
# 		modifier = {
# 			political_power_gain = -0.5
# 			neutrality_drift = 0.1
# 			stability_weekly = -0.01
# 		}
# 		days_remove = 180
# 	}
# }
>>>>>>> fix/bugfix

# POR_prospect_for_resources = {
# 	POR_develop_lisbon_tungsten_deposits = {
# 		#112
# 		icon = tungsten
# 		allowed = {
# 		}
# 		highlight_states = {
# 			highlight_state_targets = {
# 				state = 112
# 			}
# 		}
# 		available = {
# 			has_completed_focus = POR_extraction_industries
# 			num_of_civilian_factories_available_for_projects > 2
# 			owns_state = 112
# 			controls_state = 112
# 		}
# 		visible = {
# 			owns_state = 112
# 			controls_state = 112
# 			112 = {
# 				NOT = {
# 					has_state_flag = POR_lisbon_tungsten_developed_flag
# 				}
# 			}
# 		}
# 		cost = 25
# 		days_remove = 90
# 		fire_only_once = yes
# 		modifier = {
# 			civilian_factory_use = 3
# 		}
# 		remove_effect = {
# 			112 = {
# 				set_state_flag = POR_lisbon_tungsten_developed_flag
# 			}
# 			112 = {
# 				add_resource = {
# 					type = tungsten
# 					amount = 10
# 				}
# 			}
# 		}
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				has_political_power < 200
# 				factor = 0
# 			}
# 		}
# 	}
# 	POR_develop_santarem_chromium_deposits = {
# 		#795
# 		icon = chromium
# 		allowed = {
# 		}
# 		highlight_states = {
# 			highlight_state_targets = {
# 				state = 795
# 			}
# 		}
# 		available = {
# 			has_completed_focus = POR_extraction_industries
# 			num_of_civilian_factories_available_for_projects > 1
# 			owns_state = 795
# 			controls_state = 795
# 		}
# 		visible = {
# 			owns_state = 795
# 			controls_state = 795
# 			795 = {
# 				NOT = {
# 					has_state_flag = {
# 						flag = POR_santarem_chromium_developed_flag
# 						value = 5
# 					}
# 				}
# 			}
# 		}
# 		cost = 25
# 		days_remove = POR_santarem_chromium_duration
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		remove_effect = {
# 			add_to_variable = {
# 				var = POR_santarem_chromium_duration
# 				value = 30
# 			}
# 			795 = {
# 				if = {
# 					limit = {
# 						NOT = {
# 							has_state_flag = POR_santarem_chromium_developed_flag
# 						}
# 					}
# 					set_state_flag = {
# 						flag = POR_santarem_chromium_developed_flag
# 						value = 1
# 					}
# 				}
# 				else = {
# 					modify_state_flag = {
# 						flag = POR_santarem_chromium_developed_flag
# 						value = 1
# 					}
# 				}
# 			}
# 			795 = {
# 				add_resource = {
# 					type = chromium
# 					amount = 2
# 				}
# 			}
# 		}
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				has_political_power < 200
# 				factor = 0
# 			}
# 		}
# 		complete_effect = {
# 			if = {
# 				limit = {
# 					check_variable = {
# 						var = POR_santarem_chromium_duration
# 						value = 30
# 						compare = less_than
# 					}
# 				}
# 				set_variable = {
# 					var = POR_santarem_chromium_duration
# 					value = 15
# 				}
# 			}
# 		}
# 	}
# }

# POR_the_spanish_civil_war = {
# 	POR_fight_alongside_the_republic = {
# 		icon = generic_prepare_civil_war
# 		available = {
# 			has_manpower > 10000
# 			has_stability > 0.5
# 			OR = {
# 				AND = {
# 					country_exists = ESP
# 					NOT = {
# 						has_war_with = ESP
# 					}
# 				}
# 				AND = {
# 					country_exists = SPC
# 					NOT = {
# 						has_war_with = SPC
# 					}
# 				}
# 				AND = {
# 					country_exists = ESP
# 					NOT = {
# 						has_war_with = ESP
# 					}
# 				}
# 			}
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				OR = {
# 					has_stability < 0.3
# 					has_manpower < 50000
# 				}
# 				factor = 0
# 			}
# 		}
# 		visible = {
# 			SPR_scw_in_progress = yes
# 			country_exists = SPD
# 			NOT = {
# 				has_war_with = SPD
# 			}
# 			has_completed_focus = POR_they_need_our_help
# 		}
# 		complete_effect = {
# 			hidden_effect = {
# 				set_country_flag = supports_SPD_flag
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				add_to_war = {
# 					targeted_alliance = SPD
# 					enemy = ESP
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = SPC
# 				}
# 				add_to_war = {
# 					targeted_alliance = SPD
# 					enemy = SPC
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				add_to_war = {
# 					targeted_alliance = SPD
# 					enemy = ESP
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			effect_tooltip = {
# 				give_military_access = SPD
# 				SPD = {
# 					give_military_access = ROOT
# 				}
# 			}
# 			hidden_effect = {
# 				diplomatic_relation = {
# 					country = SPD
# 					relation = military_access
# 					active = yes
# 				}
# 				SPD = {
# 					diplomatic_relation = {
# 						country = PRT
# 						relation = military_access
# 						active = yes
# 					}
# 				}
# 			}
# 		}
# 	}
# 	POR_fight_alongside_the_nationalists = {
# 		icon = generic_prepare_civil_war
# 		available = {
# 			has_manpower > 10000
# 			has_stability > 0.5
# 			OR = {
# 				AND = {
# 					country_exists = SPD
# 					NOT = {
# 						has_war_with = SPD
# 					}
# 				}
# 				AND = {
# 					country_exists = SPC
# 					NOT = {
# 						has_war_with = SPC
# 					}
# 				}
# 				AND = {
# 					country_exists = ESP
# 					NOT = {
# 						has_war_with = ESP
# 					}
# 				}
# 			}
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				OR = {
# 					has_stability < 0.3
# 					has_manpower < 50000
# 				}
# 				factor = 0
# 			}
# 		}
# 		visible = {
# 			SPR_scw_in_progress = yes
# 			country_exists = ESP
# 			NOT = {
# 				has_war_with = ESP
# 			}
# 			has_completed_focus = POR_send_assistance
# 		}
# 		complete_effect = {
# 			hidden_effect = {
# 				set_country_flag = supports_SPA_flag
# 			}
# 			if = {
# 				limit = {
# 					country_exists = SPD
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = SPD
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = SPC
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = SPC
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = ESP
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			effect_tooltip = {
# 				give_military_access = ESP
# 				ESP = {
# 					give_military_access = ROOT
# 				}
# 			}
# 			hidden_effect = {
# 				diplomatic_relation = {
# 					country = ESP
# 					relation = military_access
# 					active = yes
# 				}
# 				ESP = {
# 					diplomatic_relation = {
# 						country = PRT
# 						relation = military_access
# 						active = yes
# 					}
# 				}
# 			}
# 		}
# 	}
# 	POR_fight_alongside_the_carlists = {
# 		icon = generic_prepare_civil_war
# 		available = {
# 			has_manpower > 10000
# 			has_stability > 0.5
# 			OR = {
# 				AND = {
# 					country_exists = SPD
# 					NOT = {
# 						has_war_with = SPD
# 					}
# 				}
# 				AND = {
# 					country_exists = SPC
# 					NOT = {
# 						has_war_with = SPC
# 					}
# 				}
# 				AND = {
# 					country_exists = ESP
# 					NOT = {
# 						has_war_with = ESP
# 					}
# 				}
# 			}
# 		}
# 		cost = 0
# 		fire_only_once = yes
# 		ai_will_do = {
# 			factor = 1
# 			modifier = {
# 				OR = {
# 					has_stability < 0.3
# 					has_manpower < 50000
# 				}
# 				factor = 0
# 			}
# 		}
# 		visible = {
# 			SPR_scw_in_progress = yes
# 			country_exists = ESP
# 			NOT = {
# 				has_war_with = ESP
# 			}
# 			has_completed_focus = POR_join_the_carlist_fight
# 		}
# 		complete_effect = {
# 			hidden_effect = {
# 				set_country_flag = supports_SPB_flag
# 			}
# 			if = {
# 				limit = {
# 					country_exists = SPD
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = SPD
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = SPC
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = SPC
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			if = {
# 				limit = {
# 					country_exists = ESP
# 				}
# 				add_to_war = {
# 					targeted_alliance = ESP
# 					enemy = ESP
# 					hostility_reason = asked_to_join
# 				}
# 			}
# 			effect_tooltip = {
# 				give_military_access = ESP
# 				ESP = {
# 					give_military_access = ROOT
# 				}
# 			}
# 			hidden_effect = {
# 				diplomatic_relation = {
# 					country = ESP
# 					relation = military_access
# 					active = yes
# 				}
# 				ESP = {
# 					diplomatic_relation = {
# 						country = PRT
# 						relation = military_access
# 						active = yes
# 					}
# 				}
# 			}
# 		}
# 	}
# }
